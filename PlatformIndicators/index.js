(function(w,f,i,N,s,E,R,I,T){"use strict";const{View:g,Text:U,Pressable:G}=R.ReactNative,M=i.findByName("Svg",!1).default,B=i.findByName("Svg",!1).Path,k={desktop:"M4 2.5c-1.103 0-2 .897-2 2v11c0 1.104.897 2 2 2h7v2H7v2h10v-2h-4v-2h7c1.103 0 2-.896 2-2v-11c0-1.103-.897-2-2-2H4Zm16 2v9H4v-9h16Z",web:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2Zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93Zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39Z",mobile:"M15.5 1h-8A2.5 2.5 0 0 0 5 3.5v17A2.5 2.5 0 0 0 7.5 23h8a2.5 2.5 0 0 0 2.5-2.5v-17A2.5 2.5 0 0 0 15.5 1zm-4 21c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm4.5-4H7V4h9v14z"};function C(o){const{platform:a,color:l}=o;return React.createElement(g,null,React.createElement(M,{height:"16",width:"16",viewBox:"0 0 24 24",fill:l},React.createElement(B,{d:k[a]})))}const H={online:R.chroma(I.rawColors.GREEN_360).hex(),dnd:R.chroma(I.rawColors.RED_400).hex(),idle:R.chroma(I.rawColors.YELLOW_300).hex(),offline:R.chroma(I.rawColors.PRIMARY_400).hex()};function P(o){return H[o]}const V=i.findByStoreName("PresenceStore"),A=i.findByStoreName("SessionsStore"),L=i.findByStoreName("UserStore");let x,S=0,D,b;function O(){return D||(D=setTimeout(function(){S=0,D=null},5e3)),(!x||S==0)&&(x=V.getState()),S=(S+1)%20,x}function Z(o){let a;return b||(b=L.getCurrentUser().id),o==b?a=Object.values(A.getSessions()).reduce(function(l,u){return u.clientInfo.client!=="unknown"&&(l[u.clientInfo.client]=u.status),l},{}):a=O()?.clientStatuses[o],a}function h(o){const a=o.userId,l=Z(a);return E.createElement(E.Fragment,null,Object.keys(l??{}).map(function(u){return E.createElement(C,{platform:u,color:P(l[u])})}))}const{Text:Y,View:y}=N.General;let p=[];var j={onLoad:function(){const o=i.findByDisplayName("Pressable",!1);p.push(f.patcher.before("render",o.default.type,function(c){if(!c||!c[0])return;const[e]=c;if(e){if(e.accessibilityRole=="button"&&e.children&&e.children.length>=2&&e.children[0]?.props?.user){if(!e.children[0]||!e.children[0]?.props?.user)return;const t=e.children[0]?.props?.user?.id;if(!t)return;e.children.find(function(n){return n.key=="StatusIcons"})||e.children.push(React.createElement(y,{key:"StatusIcons",style:{display:"flex",flexDirection:"row"}}));const r=e.children.find(function(n){return n.key=="StatusIcons"});r.props.children=React.createElement(h,{userId:t})}if(e.accessibilityRole=="header"&&s.findInReactTree(e.children,function(t){return t.props?.title&&t.props?.icon})){const t=s.findInReactTree(e.children,function(r){return r.props?.title&&r.props?.icon});if(t.props?.titleSuffix){s.findInReactTree(t.props.titleSuffix,function(n){return n.key=="DMStatusIndicators"})||(t.props.titleSuffix=[t.props.titleSuffix,React.createElement(y,{key:"DMStatusIndicators",style:{flexDirection:"row"}})]);const r=s.findInReactTree(t.props.titleSuffix,function(n){return n.props?.userId}).props?.userId;if(r){const n=s.findInReactTree(t.props.titleSuffix,function(m){return m.key=="DMStatusIndicators"});n&&(n.props.children=React.createElement(h,{userId:r}))}}}}})),i.findByStoreName("PresenceStore"),p.push(f.patcher.after("type",i.findByProps("DirectMessageRow").DirectMessageRow,function(c,e){if(!e.props?.user)return;const t=e.props?.user?.id;t&&f.patcher.after("type",e,function(r,n){const m=s.findInReactTree(n,function(v){return v.props?.children[0]?.type?.displayName=="View"});m.props.children[0].props.children[0]=React.createElement(y,{style:{flexDirection:"row"}},m.props.children[0].props.children[0],React.createElement(y,{style:{marginLeft:2,flexDirection:"row"}},React.createElement(h,{userId:t})))})})),p.push(f.patcher.after("default",i.findByName("ChannelHeader",!1),function(c,e){e.type?.type?.name=="PrivateChannelHeader"&&f.patcher.after("type",e.type,function(t,r){if(!r.props?.children?.props?.children)return;const n=s.findInReactTree(r,function(d){return d.props?.user?.id})?.props?.user?.id;if(!n)return;const m=r.props?.children;if(!s.findInReactTree(r,function(d){return d.key=="DMTabsV2Header"})){const d=T.getAssetIDByName("arrow-right");s.findInReactTree(m,function(z){return z.props?.children[1]?.props?.source==d}).props?.children?.push(React.createElement(y,{key:"DMTabsV2Header",style:{flexDirection:"row",justifyContent:"center",alignContent:"flex-start"}},React.createElement(y,{key:"DMTabsV2HeaderIcons",style:{flexDirection:"row"}})))}const v=s.findInReactTree(r,function(d){return d.key=="DMTabsV2HeaderIcons"});v&&(v.props.children=React.createElement(h,{userId:n}))})}));const a=i.findByName("DefaultName",!1);p.push(f.patcher.after("default",a,function(c,e){const t=c[0]?.user;t!==void 0&&e&&t.id&&e.props?.children[0]?.props?.children?.push(React.createElement(h,{userId:t.id}))}));const l=i.findByName("DisplayName",!1);p.push(f.patcher.after("default",l,function(c,e){const t=c[0]?.user;t!==void 0&&e&&t.id&&e.props?.children?.props?.children[0]?.props?.children?.push(React.createElement(h,{userId:t.id}))}));const u=i.findByName("Status",!1);p.push(f.patcher.before("default",u,function(c){c&&c[0]&&(c[0].isMobileOnline=!1)}))},onUnload:function(){p.forEach(function(o){return o()})}};return w.default=j,Object.defineProperty(w,"__esModule",{value:!0}),w})({},vendetta,vendetta.metro,vendetta.ui.components,vendetta.utils,window.React,vendetta.metro.common,vendetta.ui,vendetta.ui.assets);
